<ion-view>
  <ion-nav-title>{{project.name}}</ion-nav-title>

  <ion-nav-buttons side="secondary">
    <a class="button button-positive" href="#/app/projects/{{project.$id}}/edit" ng-show="is_logged_in() &amp;&amp; joined()">Edit</a>
  </ion-nav-buttons>

  <ion-content padding="'true'" class="has-header project-page">
    <h1>{{project.name}}</h1>
    <p>{{project.description}}</p>

    <div class="button-bar">
      <a class="button" ng-class="{active: tab=='activity'}" ng-click="tab='activity'">Activity</a>
      <a class="button" ng-class="{active: tab=='tasks'}" ng-click="tab='tasks'">Tasks</a>
      <a class="button" ng-class="{active: tab=='people'}" ng-click="tab='people'">People</a>
    </div>

    <ion-item ng-show="tab=='activity'">
      <h1>Activity</h1>
    </ion-item>

    <ion-item ng-show="tab=='tasks'" class="tab-content">
      <form class="list" ng-submit="create_task()">
        <label class="item item-input item-stacked-label">
          <input type="text" placeholder="Add a task" ng-model="task.description">
        </label>
      </form>

      <div ng-repeat="task in project.tasks">
        <ion-checkbox class="checkbox-emmersive" ng-model="task.status" ng-true-value="'open'" ng-false-value="'closed'">
          <principal id="{{task.created_by}}"></principal><br>
          {{task.description}}
        </ion-checkbox>
      </div>
    </ion-item>

    <ion-item menu-close="" class="item-thumbnail-left" ng-repeat="person in project.people" ng-show="tab=='people'">
      <user-card id="{{person}}" class="item-avatar"></user-card>
    </ion-item>


  </ion-content>

  <div class="bar bar-footer bar-dark">
    <button class="button button-clear"></button>
    <div class="title">
      <button class="button button-assertive" ng-show="is_logged_in() &amp;&amp; joined()" ng-click="leave_project()">Leave This</button>
      <button class="button button-balanced" ng-show="is_logged_in() &amp;&amp; !joined()" ng-click="join_project()">Join This</button>
      <a class="button button-balanced" href="#/app/login" ng-show="!is_logged_in()">Login to Join</a>
    </div>
    <button class="button button-clear"></button>
  </div>
</ion-view>
